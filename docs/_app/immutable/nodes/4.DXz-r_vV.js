import"../chunks/CWj6FrbW.js";import{i as ce}from"../chunks/26Sv5WEW.js";import{aS as de,aK as ue,_ as fe,ao as pe,h as me,v as w,aT as _e,p as he,ae as $,t as Y,k as s,aU as Z,af as x,a as ge,ah as o,ai as r,aj as l,x as h,ag as g,S as c}from"../chunks/9Lpr1msW.js";import{i as B}from"../chunks/DlwTKuGq.js";import{r as C}from"../chunks/6uC9pfm6.js";import{s as be,a as ze}from"../chunks/CV0kPxej.js";import{l as we,p as ye}from"../chunks/C53v-B8y.js";import{g as ke}from"../chunks/BPHVkyiR.js";function F(e,i,p=i){var b=new WeakSet;de(e,"input",async u=>{var a=u?e.defaultValue:e.value;if(a=I(e)?J(a):a,p(a),w!==null&&b.add(w),await ue(),a!==(a=i())){var m=e.selectionStart,f=e.selectionEnd,_=e.value.length;if(e.value=a??"",f!==null){var v=e.value.length;m===f&&f===_&&v>_?(e.selectionStart=v,e.selectionEnd=v):(e.selectionStart=m,e.selectionEnd=Math.min(f,v))}}}),(me&&e.defaultValue!==e.value||fe(i)==null&&e.value)&&(p(I(e)?J(e.value):e.value),w!==null&&b.add(w)),pe(()=>{var u=i();if(e===document.activeElement){var a=_e??w;if(b.has(a))return}I(e)&&u===J(e.value)||e.type==="date"&&!u&&!e.value||u!==e.value&&(e.value=u??"")})}function I(e){var i=e.type;return i==="number"||i==="range"}function J(e){return e===""?null:+e}function Se(e){return function(...i){var p=i[0];return p.preventDefault(),e==null?void 0:e.apply(this,i)}}var xe=$('<div class="error-message svelte-1s728sz"> </div>'),$e=$('<div class="form-group svelte-1s728sz"><label for="name" class="svelte-1s728sz">Full Name</label> <div class="input-wrapper svelte-1s728sz"><i class="fa-solid fa-user svelte-1s728sz"></i> <input type="text" id="name" placeholder="John Doe" required class="svelte-1s728sz"/></div></div>'),Ee=$('<div class="forgot-password svelte-1s728sz"><a href="/forgot-password" class="svelte-1s728sz">Forgot Password?</a></div>'),je=$('<div class="auth-container svelte-1s728sz"><div class="auth-card svelte-1s728sz"><h2 class="svelte-1s728sz"> </h2> <p class="subtitle svelte-1s728sz"> </p> <!> <form><!> <div class="form-group svelte-1s728sz"><label for="email" class="svelte-1s728sz">Email Address</label> <div class="input-wrapper svelte-1s728sz"><i class="fa-solid fa-envelope svelte-1s728sz"></i> <input type="email" id="email" placeholder="john@example.com" required class="svelte-1s728sz"/></div></div> <div class="form-group svelte-1s728sz"><label for="password" class="svelte-1s728sz">Password</label> <div class="input-wrapper svelte-1s728sz"><i class="fa-solid fa-lock svelte-1s728sz"></i> <input type="password" id="password" placeholder="••••••••" required class="svelte-1s728sz"/></div></div> <!> <button type="submit" class="submit-btn svelte-1s728sz"> </button></form> <div class="toggle-mode svelte-1s728sz"><p> <button class="link-btn svelte-1s728sz"> </button></p></div></div></div>');function Ie(e,i){he(i,!1);const p=()=>ze(ye,"$page",b),[b,u]=be();let a=h(!0),m=h(""),f=h(""),_=h(""),v=h(""),y=h(!1);function ee(){c(a,!s(a)),c(v,"")}async function ae(){c(v,""),c(y,!0);const n=`http://localhost:8000${s(a)?"/api/login":"/api/register"}`;try{const d={email:s(m),password:s(f)};s(a)||(d.name=s(_));const z=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),S=await z.json();if(!z.ok)throw new Error(S.message||"Something went wrong");if(s(a)){const U=S.token,ne=await(await fetch("http://localhost:8000/api/user",{headers:{Authorization:`Bearer ${U}`}})).json();we(U,ne);const X=p().url.searchParams.get("callback");X?window.location.href=`${X}?token=${U}`:ke("/profile")}else c(a,!0),c(v,"Account created! Please sign in.")}catch(d){c(v,d.message)}finally{c(y,!1)}}ce();var E=je(),L=r(E),j=r(L),se=r(j,!0);l(j);var A=o(j,2),te=r(A,!0);l(A);var M=o(A,2);{var re=t=>{var n=xe(),d=r(n,!0);l(n),Y(()=>g(d,s(v))),x(t,n)};B(M,t=>{s(v)&&t(re)})}var k=o(M,2),N=r(k);{var le=t=>{var n=$e(),d=o(r(n),2),z=o(r(d),2);C(z),l(d),l(n),F(z,()=>s(_),S=>c(_,S)),x(t,n)};B(N,t=>{s(a)||t(le)})}var D=o(N,2),O=o(r(D),2),R=o(r(O),2);C(R),l(O),l(D);var P=o(D,2),V=o(r(P),2),W=o(r(V),2);C(W),l(V),l(P);var G=o(P,2);{var oe=t=>{var n=Ee();x(t,n)};B(G,t=>{s(a)&&t(oe)})}var q=o(G,2),ie=r(q,!0);l(q),l(k);var K=o(k,2),H=r(K),Q=r(H),T=o(Q),ve=r(T,!0);l(T),l(H),l(K),l(L),l(E),Y(()=>{g(se,s(a)?"Welcome Back":"Create Account"),g(te,s(a)?"Enter your details to access your account":"Get started with your free account today"),q.disabled=s(y),g(ie,s(y)?"Loading...":s(a)?"Sign In":"Sign Up"),g(Q,`${s(a)?"Don't have an account?":"Already have an account?"} `),g(ve,s(a)?"Sign Up":"Sign In")}),F(R,()=>s(m),t=>c(m,t)),F(W,()=>s(f),t=>c(f,t)),Z("submit",k,Se(ae)),Z("click",T,ee),x(e,E),ge(),u()}export{Ie as component};
